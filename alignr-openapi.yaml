openapi: 3.0.3
info:
  title: Alignr Job Intelligence API
  description: >
    API for scoring jobs, identifying skill gaps, tailoring CVs, career planning, and more.
    This version aligns exactly with the live Flask app on Render.
  version: 1.1.0
servers:
  - url: https://alignr-api.onrender.com
paths:
  /health:
    get:
      operationId: getHealth
      summary: Health check for API uptime
      responses:
        "200":
          description: Service is running
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
  /score-job:
    post:
      operationId: scoreJob
      summary: Score a job match based on user skills and job description
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
              properties:
                user_skills:
                  type: array
                  items:
                    type: string
                job_description:
                  type: string
      responses:
        "200":
          description: Job match score and skill comparison
          content:
            application/json:
              schema:
                type: object
                properties:
                  score:
                    type: integer
                  matched_skills:
                    type: array
                    items:
                      type: string
                  missing_skills:
                    type: array
                    items:
                      type: string
                  notes:
                    type: string
  /skills-gap:
    post:
      operationId: getSkillsGap
      summary: Recommend courses and experience to close job skill gaps
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
              properties:
                user_skills:
                  type: array
                  items:
                    type: string
                job_title:
                  type: string
      responses:
        "200":
          description: Skills to develop and course recommendations
          content:
            application/json:
              schema:
                type: object
                properties:
                  job_title:
                    type: string
                  skills_to_develop:
                    type: array
                    items:
                      type: object
                      properties:
                        skill:
                          type: string
                        why_needed:
                          type: string
                        how_to_evidence:
                          type: string
                        recommended_course:
                          type: object
                          properties:
                            name:
                              type: string
                            provider:
                              type: string
                            duration:
                              type: string
                            hours_per_week:
                              type: integer
  /cv-feedback:
    post:
      operationId: getCvFeedback
      summary: Give targeted CV improvement feedback
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
              properties:
                cv_text:
                  type: string
      responses:
        "200":
          description: CV feedback and prompting questions
          content:
            application/json:
              schema:
                type: object
                properties:
                  feedback_points:
                    type: array
                    items:
                      type: string
                  prompt_questions:
                    type: array
                    items:
                      type: string
  /guidance-intake:
    post:
      operationId: guidanceIntake
      summary: Intake goal and suggest next support step
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
              properties:
                goal:
                  type: string
      responses:
        "200":
          description: Action type and next step recommendation
          content:
            application/json:
              schema:
                type: object
                properties:
                  type:
                    type: string
                  next_step:
                    type: string
  /career-quiz:
    post:
      operationId: runCareerQuiz
      summary: Generate personality-based career suggestions
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
              properties:
                answers:
                  type: array
                  items:
                    type: string
      responses:
        "200":
          description: Personality summary and career match
          content:
            application/json:
              schema:
                type: object
                properties:
                  personality_summary:
                    type: string
                  career_suggestion:
                    type: string
                  next_step:
                    type: string
  /career-discovery:
    post:
      operationId: discoverCareerPath
      summary: Suggest roles and SWOT based on traits and interests
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
              properties:
                personality:
                  type: array
                  items:
                    type: string
                interests:
                  type: array
                  items:
                    type: string
                skills:
                  type: array
                  items:
                    type: string
      responses:
        "200":
          description: Suggested career paths and SWOT summary
          content:
            application/json:
              schema:
                type: object
                properties:
                  suggested_careers:
                    type: array
                    items:
                      type: string
                  swot_summary:
                    type: object
                    properties:
                      strengths:
                        type: array
                        items:
                          type: string
                      weaknesses:
                        type: array
                        items:
                          type: string
                      opportunities:
                        type: array
                        items:
                          type: string
                      threats:
                        type: array
                        items:
                          type: string
  /career-plan:
    post:
      operationId: getCareerPlan
      summary: Create a step-by-step career learning plan
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
              properties:
                goal_role:
                  type: string
                current_skills:
                  type: array
                  items:
                    type: string
                required_skills:
                  type: array
                  items:
                    type: string
      responses:
        "200":
          description: Step-by-step plan to reach a target role
          content:
            application/json:
              schema:
                type: object
                properties:
                  goal_role:
                    type: string
                  missing_skills:
                    type: array
                    items:
                      type: string
                  timeline_estimate_weeks:
                    type: integer
                  step_by_step_plan:
                    type: array
                    items:
                      type: object
                      properties:
                        skill:
                          type: string
                  final_step:
                    type: string
  /job-level-validation:
    post:
      operationId: validateJobLevel
      summary: Validate realistic job level from skills and experience
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
              properties:
                skills:
                  type: array
                  items:
                    type: string
                experience_years:
                  type: integer
      responses:
        "200":
          description: Best-fit job level and guidance
          content:
            application/json:
              schema:
                type: object
                properties:
                  suggested_level:
                    type: string
                  reason:
                    type: string
                  suggestions:
                    type: array
                    items:
                      type: string
  /job-tracker:
    post:
      operationId: trackJobs
      summary: Track job applications and provide CV tailoring advice
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
              properties:
                applications:
                  type: array
                  items:
                    type: object
                    properties:
                      job_title:
                        type: string
                      company:
                        type: string
                      deadline:
                        type: string
                      tailored_cv:
                        type: boolean
                      status:
                        type: string
      responses:
        "200":
          description: Returns job application analysis and next actions
          content:
            application/json:
              schema:
                type: object
                properties:
                  applications:
                    type: array
                    items:
                      type: object
                      properties:
                        job_title:
                          type: string
                        company:
                          type: string
                        cv_tips:
                          type: array
                          items:
                            type: string
                        next_action:
                          type: string
  /skills-gap-table:
    post:
      operationId: getSkillsGapTable
      summary: Generate a comparison table of matched and missing skills
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
              properties:
                user_skills:
                  type: array
                  items:
                    type: string
                job_skills:
                  type: array
                  items:
                    type: string
      responses:
        "200":
          description: Skills gap analysis table
          content:
            application/json:
              schema:
                type: object
                properties:
                  gap_table:
                    type: array
                    items:
                      type: object
                      properties:
                        skill:
                          type: string
                        status:
                          type: string
                        action:
                          type: string
                  summary:
                    type: object
                    properties:
                      matched_skills:
                        type: array
                        items:
                          type: string
                      missing_skills:
                        type: array
                        items:
                          type: string
                      total_required:
                        type: integer
                      total_matched:
                        type: integer
                      total_missing:
                        type: integer
  /extract-job-skills:
    post:
      operationId: extractJobSkills
      summary: Extract skills from a job description
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
              properties:
                job_description:
                  type: string
      responses:
        "200":
          description: Extracted skill list from job description
          content:
            application/json:
              schema:
                type: object
                properties:
                  extracted_skills:
                    type: array
                    items:
                      type: string
                  note:
                    type: string
  /check-skills-gap:
    post:
      operationId: checkSkillsGap
      summary: Compare user skills with job requirements
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
              properties:
                user_skills:
                  type: array
                  items:
                    type: string
                job_description:
                  type: string
      responses:
        "200":
          description: Comparison of found and missing skills
          content:
            application/json:
              schema:
                type: object
                properties:
                  job_skills_found:
                    type: array
                    items:
                      type: string
                  matched_skills:
                    type: array
                    items:
                      type: string
                  missing_skills:
                    type: array
                    items:
                      type: string
                  gap_note:
                    type: string
  /recommend-learning:
    post:
      operationId: recommendLearning
      summary: Recommend courses for missing skills
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
              properties:
                missing_skills:
                  type: array
                  items:
                    type: string
      responses:
        "200":
          description: Recommended courses and learning resources
          content:
            application/json:
              schema:
                type: object
                properties:
                  recommendations:
                    type: array
                    items:
                      type: object
                      properties:
                        skill:
                          type: string
                        course:
                          type: object
                          properties:
                            name:
                              type: string
                            provider:
                              type: string
                            duration:
                              type: string
                            hours_per_week:
                              type: integer
                            reason:
                              type: string
                  note:
                    type: string
