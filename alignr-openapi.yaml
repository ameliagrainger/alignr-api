openapi: 3.1.0
info:
  title: Alignr Job Intelligence API
  description: API for scoring jobs, identifying skill gaps, tailoring CVs, and career planning.
  version: 1.0.0
servers:
  - url: https://alignr-api.onrender.com
paths:
  /score-job:
    post:
      operationId: scoreJob
      summary: Score a CV or skill set against a job description
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                user_skills:
                  type: array
                  items:
                    type: string
                job_description:
                  type: string
      responses:
        '200':
          description: Match score and feedback
          content:
            application/json:
              schema:
                type: object
                properties:
                  score:
                    type: integer
                  matched_skills:
                    type: array
                    items:
                      type: string
                  missing_skills:
                    type: array
                    items:
                      type: string
                  notes:
                    type: string

  /skills-gap-table:
    post:
      operationId: skillsGapTable
      summary: Get a table of missing vs matched skills
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                user_skills:
                  type: array
                  items:
                    type: string
                job_description:
                  type: string
      responses:
        '200':
          description: Table showing skill match status
          content:
            application/json:
              schema:
                type: object
                properties:
                  table:
                    type: string

  /extract-job-skills:
    post:
      operationId: extractJobSkills
      summary: Extract required skills from job description
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                job_description:
                  type: string
      responses:
        '200':
          description: Extracted list of skills
          content:
            application/json:
              schema:
                type: object
                properties:
                  skills:
                    type: array
                    items:
                      type: string

  /check-skills-gap:
    post:
      operationId: checkSkillsGap
      summary: Compare user's skills to job and find gaps
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                user_skills:
                  type: array
                  items:
                    type: string
                job_skills:
                  type: array
                  items:
                    type: string
      responses:
        '200':
          description: Skill gap comparison
          content:
            application/json:
              schema:
                type: object
                properties:
                  missing_skills:
                    type: array
                    items:
                      type: string
                  matched_skills:
                    type: array
                    items:
                      type: string

  /recommend-learning:
    post:
      operationId: recommendLearning
      summary: Recommend learning resources for missing skills
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                missing_skills:
                  type: array
                  items:
                    type: string
      responses:
        '200':
          description: List of learning resources
          content:
            application/json:
              schema:
                type: object
                properties:
                  resources:
                    type: array
                    items:
                      type: string

  /cv-tweaks:
    post:
      operationId: cvTweaks
      summary: Suggest ways to tailor a CV for a job
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                cv_text:
                  type: string
                job_description:
                  type: string
      responses:
        '200':
          description: Suggested improvements for CV
          content:
            application/json:
              schema:
                type: object
                properties:
                  suggestions:
                    type: string

  /career-discovery:
    post:
      operationId: careerDiscovery
      summary: Discover new roles based on user interests or experience
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                background:
                  type: string
                goals:
                  type: string
      responses:
        '200':
          description: Career recommendations
          content:
            application/json:
              schema:
                type: object
                properties:
                  career_suggestion:
                    type: string
                  next_step:
                    type: string

  /job-level-validation:
    post:
      operationId: validateJobLevel
      summary: Suggest job level (e.g., junior/senior) based on skills
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                user_skills:
                  type: array
                  items:
                    type: string
                experience_years:
                  type: integer
      responses:
        '200':
          description: Estimated job level
          content:
            application/json:
              schema:
                type: object
                properties:
                  level:
                    type: string
                  reasoning:
                    type: string
